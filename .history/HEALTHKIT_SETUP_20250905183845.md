# Configuration Apple HealthKit pour RevoFit

## Vue d'ensemble

L'intégration Apple HealthKit est configurée dans RevoFit pour synchroniser les données de fitness des utilisateurs. Actuellement, l'application fonctionne en mode démonstration avec des données simulées.

## Configuration actuelle

### Mode Démonstration
- Les données HealthKit sont simulées pour le développement
- Fonctionne avec Expo Go et les builds de développement
- Affiche des données d'exemple (pas, fréquence cardiaque, calories, distance)

### Mode Production
Pour utiliser les vraies données Apple Health, vous devez :

1. **Créer un build de développement personnalisé**
   ```bash
   npx expo install expo-dev-client
   npx expo run:ios
   ```

2. **Configurer HealthKit dans Xcode**
   - Ouvrir `ios/RevoFit.xcworkspace` dans Xcode
   - Sélectionner le projet RevoFit
   - Aller dans "Signing & Capabilities"
   - Cliquer sur "+ Capability" et ajouter "HealthKit"
   - Cocher "Clinical Health Records" si nécessaire

3. **Remplacer le mock par le vrai package**
   - Dans `components/HealthDrawer.tsx`, remplacer le mock par :
   ```typescript
   import AppleHealthKit, {
     HealthValue,
     HealthKitPermissions,
   } from 'react-native-health';
   ```

## Permissions configurées

### iOS (Info.plist)
- `NSHealthShareUsageDescription`: Lecture des données de santé
- `NSHealthUpdateUsageDescription`: Écriture des données d'entraînement

### Données synchronisées
- **Pas** : Nombre de pas quotidiens
- **Fréquence cardiaque** : Dernière mesure de fréquence cardiaque
- **Énergie active** : Calories brûlées pendant l'activité
- **Distance** : Distance parcourue en marchant/courant
- **Entraînements** : Données d'entraînement (lecture et écriture)

## Utilisation

1. Ouvrir l'écran "Workouts"
2. Cliquer sur le bouton "Health" (vert) à côté de "Generate"
3. Le drawer Apple Health s'ouvre
4. Cliquer sur "Se connecter à Apple Health"
5. Autoriser les permissions dans l'application Santé d'Apple

## Dépannage

### Erreur "isAvailable is not a function"
- Cette erreur indique que le package natif n'est pas correctement lié
- Solution : Créer un build de développement personnalisé

### Permissions refusées
- L'utilisateur doit aller dans Réglages > Confidentialité et sécurité > Santé
- Autoriser RevoFit à accéder aux données de santé

### Données non synchronisées
- Vérifier que l'application Santé d'Apple contient des données
- S'assurer que les permissions sont accordées
- Redémarrer l'application après avoir accordé les permissions

## Développement

Pour tester l'intégration complète :

1. Créer un build de développement personnalisé
2. Installer sur un appareil iOS physique
3. Configurer HealthKit dans Xcode
4. Tester la connexion et la synchronisation des données

## Notes importantes

- HealthKit n'est disponible que sur iOS
- Les données sont stockées localement sur l'appareil
- Respecte la confidentialité et les permissions de l'utilisateur
- Compatible avec les données de l'application Santé d'Apple
